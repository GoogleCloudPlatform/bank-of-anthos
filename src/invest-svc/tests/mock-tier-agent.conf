events {
    worker_connections 1024;
}

http {
    server {
        listen 80;
        
        # Health check endpoint
        location /health {
            return 200 '{"status": "healthy"}';
            add_header Content-Type application/json;
        }
        
        # Mock tier allocation endpoint
        location /allocate {
            if ($request_method = POST) {
                # Return mock tier allocation
                return 200 '{"tier1_amt": 600.0, "tier2_amt": 300.0, "tier3_amt": 100.0}';
                add_header Content-Type application/json;
            }
            return 405 '{"error": "Method not allowed"}';
            add_header Content-Type application/json;
        }
        
        # Default response
        location / {
            return 404 '{"error": "Not found"}';
            add_header Content-Type application/json;
        }
    }
}
